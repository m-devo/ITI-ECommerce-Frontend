<div class="p-6 w-96">
  <h2 class="text-xl font-semibold mb-4">Edit Review</h2>

  <!-- Rating Stars -->
  <div class="flex mb-4 text-yellow-500 text-3xl cursor-pointer">
    <ng-container *ngFor="let star of [1,2,3,4,5]">
      <span (click)="setRating(star)" class="transition hover:scale-110">
        {{ star <= updatedRating ? '★' : '☆' }}
      </span>
    </ng-container>
  </div>

  <!-- Review Text -->
  <textarea
    [(ngModel)]="updatedText"
    rows="5"
    class="w-full p-3 border rounded-lg focus:ring-blue-400 focus:ring-2"
  ></textarea>

  <!-- Audio Section -->
  <div class="mt-4">
    <label class="block font-medium mb-2">Audio Review (Optional)</label>

    <!-- Recording Buttons -->
    <div class="flex gap-3 mb-3">
      <button
        *ngIf="!isRecording && !audioPreviewUrl"
        (click)="startRecording()"
        class="px-3 py-1 bg-blue-600 text-white rounded-md"
      >
        Start Recording
      </button>

      <button
        *ngIf="isRecording"
        (click)="stopRecording()"
        class="px-3 py-1 bg-red-500 text-white rounded-md animate-pulse"
      >
        Stop Recording
      </button>

      <label
        *ngIf="!isRecording && !audioPreviewUrl"
        class="px-3 py-1 bg-gray-200 rounded-md cursor-pointer"
      >
        Upload Audio
        <input
          type="file"
          accept="audio/*"
          (change)="onFileSelected($event)"
          class="hidden"
        />
      </label>
    </div>

    <!-- Audio Preview -->
    <div *ngIf="audioPreviewUrl" class="mt-3">
      <audio [src]="audioPreviewUrl" controls class="w-full"></audio>
      <button
        (click)="removeAudio()"
        class="mt-2 px-3 py-1 bg-red-500 text-white rounded-md"
      >
        Remove Audio
      </button>
    </div>
  </div>

  <!-- Buttons -->
  <div class="flex justify-end gap-3 mt-6">
    <button class="px-4 py-2 bg-gray-300 rounded-md" (click)="cancel()">
      Cancel
    </button>

    <button
      class="px-4 py-2 bg-blue-600 text-white rounded-md"
      (click)="save()"
    >
      Save
    </button>
  </div>
</div>
